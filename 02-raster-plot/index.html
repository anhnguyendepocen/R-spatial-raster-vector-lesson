<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="last-modified" content="2018-03-23 15:42:17 +0000">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- meta "search-domain" used for google site search function google_search() -->
    <meta name="search-domain" value="">
    <link rel="stylesheet" type="text/css" href="../assets/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="../assets/css/lesson.css" />
    
    <link rel="shortcut icon" type="image/x-icon" href="/favicon-dc.ico" />
    
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
    <title>Intro to Geospatial Data with R: Plot Raster Data in R</title>
  </head>
  <body>
    <div class="container">
      
<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      
      
      <a href="http://datacarpentry.org" class="pull-left">
        <img class="navbar-logo" src="../assets/img/dc-icon-black.svg" alt="Data Carpentry logo" />
      </a>
      

      
      <a class="navbar-brand" href="../">Home</a>

    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">

	
        <li><a href="../conduct/">Code of Conduct</a></li>

	
        
        <li><a href="../setup/">Setup</a></li>
        <li class="dropdown">
          <a href="../" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Episodes <span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            <li><a href="../01-raster-structure/">Intro to Raster Data in R</a></li>
            
            <li><a href="../02-raster-plot/">Plot Raster Data in R</a></li>
            
            <li><a href="../03-raster-reproject-in-r/">Reproject Raster Data in R</a></li>
            
            <li><a href="../04-raster-calculations-in-r/">Raster Calculations in R</a></li>
            
            <li><a href="../05-raster-multi-band-in-r/">Work With Multi-Band Rasters in R</a></li>
            
            <li><a href="../06-vector-open-shapefile-in-r/">Open and Plot Shapefiles in R</a></li>
            
            <li><a href="../07-vector-shapefile-attributes-in-r/">Explore and Plot by Shapefile Attributes</a></li>
            
            <li><a href="../08-vector-plot-shapefiles-custom-legend/">Plot Multiple Shapefiles in R</a></li>
            
            <li><a href="../09-vector-when-data-dont-line-up-crs/">Handling Spatial Projection & CRS in R</a></li>
            
            <li><a href="../10-vector-csv-to-shapefile-in-r/">Convert from .csv to a Shapefile in R</a></li>
            
            <li><a href="../11-vector-raster-integration/">Manipulate Raster Data in R</a></li>
            
            <li><a href="../12-time-series-raster/">Raster Time Series Data in R</a></li>
            
            <li><a href="../13-plot-time-series-rasters-in-r/">Plot Raster Time Series Data in R</a></li>
            
            <li><a href="../14-extract-ndvi-from-rasters-in-r/">Derive Values from Raster Time Series</a></li>
            
	    <li role="separator" class="divider"></li>
            <li><a href="../aio/">All in one page (Beta)</a></li>
          </ul>
        </li>
	

	
	
        <li class="dropdown">
          <a href="../" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Extras <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="../reference/">Reference</a></li>
            
          </ul>
        </li>
	

	
        <li><a href="../license/">License</a></li>
	
	<li><a href="/edit/gh-pages/_episodes/02-raster-plot.md">Improve this page <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span></a></li>
	
      </ul>
      <form class="navbar-form navbar-right" role="search" id="search" onsubmit="google_search(); return false;">
        <div class="form-group">
          <input type="text" id="google-search" placeholder="Search..." aria-label="Google site search">
        </div>
      </form>
    </div>
  </div>
</nav>


<div class="row">
  <div class="col-md-1">
    <h3>
      
      <a href="../01-raster-structure/"><span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span><span class="sr-only">previous episode</span></a>
      
    </h3>
  </div>
  <div class="col-md-10">
    
    <h3 class="maintitle"><a href="../">Intro to Geospatial Data with R</a></h3>
    
  </div>
  <div class="col-md-1">
    <h3>
      
      <a href="../03-raster-reproject-in-r/"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span><span class="sr-only">next episode</span></a>
      
    </h3>
  </div>
</div>

<article>
<div class="row">
  <div class="col-md-1">
  </div>
  <div class="col-md-10">
    <h1 class="maintitle">Plot Raster Data in R</h1>
  </div>
  <div class="col-md-1">
  </div>
</div>


<blockquote class="testimonial">
  <h2>Authors</h2>
    Leah A. Wasser, Megan A. Jones, Zack Brym, Kristina Riemer, Jason Williams, Jeff Hollister, Mike Smorul, Joseph Stachelek
</blockquote>

<blockquote class="objectives">
  <h2>Overview</h2>

  <div class="row">
    <div class="col-md-3">
      <strong>Teaching:</strong> 10 min
      <br/>
      <strong>Exercises:</strong> 0 min
    </div>
    <div class="col-md-9">
      <strong>Questions</strong>
      <ul>
	
	<li>
</li>
	
      </ul>
    </div>
  </div>

  <div class="row">
    <div class="col-md-3">
    </div>
    <div class="col-md-9">
      <strong>Objectives</strong>
      <ul>
	
	<li><p>Know how to plot a single band raster in <code class="highlighter-rouge">R</code>.</p>
</li>
	
	<li><p>Know how to layer a raster dataset on top of a hillshade to create an elegant basemap.</p>
</li>
	
      </ul>
    </div>
  </div>

</blockquote>

<blockquote class="prereq">
  <h2 id="things-youll-need-to-complete-this-tutorial">Things You’ll Need To Complete This Tutorial</h2>
  <p><strong>R Skill Level:</strong> Intermediate - you’ve got the basics of <code class="highlighter-rouge">R</code> down.</p>

  <p>You will need the most current version of <code class="highlighter-rouge">R</code> and, preferably, <code class="highlighter-rouge">RStudio</code> loaded
on your computer to complete this tutorial.</p>

  <h3 id="install-r-packages">Install R Packages</h3>

  <ul>
    <li><strong>raster:</strong> <code class="highlighter-rouge">install.packages("raster")</code></li>
    <li>
      <p><strong>rgdal:</strong> <code class="highlighter-rouge">install.packages("rgdal")</code></p>
    </li>
    <li><a href="/R/Packages-In-R/">More on Packages in R - Adapted from Software Carpentry.</a></li>
  </ul>

  <h4 id="download-data">Download Data</h4>

  <h3 id="reference">Reference</h3>

  <ul>
    <li><a href="http://cran.r-project.org/web/packages/raster/raster.pdf" target="_blank"> Read more about the <code class="highlighter-rouge">raster</code> package in <code class="highlighter-rouge">R</code>.</a></li>
  </ul>
</blockquote>

<p>This tutorial reviews how to plot a raster in <code class="highlighter-rouge">R</code> using the <code class="highlighter-rouge">plot()</code>
function. It also covers how to layer a raster on top of a hillshade to produce
an eloquent map.</p>

<h2 id="plot-raster-data-in-r">Plot Raster Data in R</h2>
<p>In this tutorial, we will plot the Digital Surface Model (DSM) raster
for the NEON Harvard Forest Field Site. We will use the <code class="highlighter-rouge">hist()</code> function as a
tool to explore raster values. And render categorical plots, using the <code class="highlighter-rouge">breaks</code> argument to get bins that are meaningful representations of our data.</p>

<p>We will use the <code class="highlighter-rouge">raster</code> and <code class="highlighter-rouge">rgdal</code> packages in this tutorial. If you do not
have the <code class="highlighter-rouge">DSM_HARV</code> object from the
<a href="/R/Introduction-to-Raster-Data-In-R/">Intro To Raster In R tutorial</a>,
please create it now.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># if they are not already loaded</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">rgdal</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Loading required package: sp
</code></pre></div></div>

<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rgdal: version: 1.2-8, (SVN revision 663)
 Geospatial Data Abstraction Library extensions to R successfully loaded
 Loaded GDAL runtime: GDAL 2.2.1, released 2017/06/23
 Path to GDAL shared files: /usr/share/gdal/2.2
 Loaded PROJ.4 runtime: Rel. 4.9.2, 08 September 2015, [PJ_VERSION: 492]
 Path to PROJ.4 shared files: (autodetected)
 Linking to sp version: 1.2-5 
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">raster</span><span class="p">)</span><span class="w">

</span><span class="c1"># set working directory to ensure R can find the file we wish to import</span><span class="w">
</span><span class="c1"># setwd("working-dir-path-here")</span><span class="w">

</span><span class="c1"># import raster</span><span class="w">
</span><span class="n">DSM_HARV</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">raster</span><span class="p">(</span><span class="s2">"data/NEON-DS-Airborne-Remote-Sensing/HARV/DSM/HARV_dsmCrop.tif"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>First, let’s plot our Digital Surface Model object (<code class="highlighter-rouge">DSM_HARV</code>) using the
<code class="highlighter-rouge">plot()</code> function. We add a title using the argument <code class="highlighter-rouge">main = "title"</code>.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Plot raster object</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">DSM_HARV</span><span class="p">,</span><span class="w">
     </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Digital Surface Model\nNEON Harvard Forest Field Site"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="../fig/rmd-hist-raster-1.png" title="plot of chunk hist-raster" alt="plot of chunk hist-raster" style="display: block; margin: auto;" /></p>

<h2 id="plotting-data-using-breaks">Plotting Data Using Breaks</h2>
<p>We can view our data “symbolized” or colored according to ranges of values
rather than using a continuous color ramp. This is comparable to a “classified”
map. However, to assign breaks, it is useful to first explore the distribution
of the data using a histogram. The <code class="highlighter-rouge">breaks</code> argument in the <code class="highlighter-rouge">hist()</code> function
tells <code class="highlighter-rouge">R</code> to use fewer or more breaks or bins.</p>

<p>If we name the histogram, we can also view counts for each bin and assigned
break values.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Plot distribution of raster values</span><span class="w">
</span><span class="n">DSMhist</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">hist</span><span class="p">(</span><span class="n">DSM_HARV</span><span class="p">,</span><span class="w">
     </span><span class="n">breaks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w">
     </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Histogram Digital Surface Model\n NEON Harvard Forest Field Site"</span><span class="p">,</span><span class="w">
     </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"wheat3"</span><span class="p">,</span><span class="w">  </span><span class="c1"># changes bin color</span><span class="w">
     </span><span class="n">xlab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Elevation (m)"</span><span class="p">)</span><span class="w">  </span><span class="c1"># label the x-axis</span><span class="w">
</span></code></pre></div></div>

<div class="error highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Warning in .hist1(x, maxpixels = maxpixels, main = main, plot = plot, ...):
4% of the raster cells were used. 100000 values used.
</code></pre></div></div>

<p><img src="../fig/rmd-create-histogram-breaks-1.png" title="plot of chunk create-histogram-breaks" alt="plot of chunk create-histogram-breaks" style="display: block; margin: auto;" /></p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Where are breaks and how many pixels in each category?</span><span class="w">
</span><span class="n">DSMhist</span><span class="o">$</span><span class="n">breaks</span><span class="w">
</span></code></pre></div></div>

<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 300 350 400 450
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">DSMhist</span><span class="o">$</span><span class="n">counts</span><span class="w">
</span></code></pre></div></div>

<div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 32041 67502   457
</code></pre></div></div>

<p>Warning message!? Remember, the default for the histogram is to include only a
subset of 100,000 values. We could force it to show all the pixel values or we
can use the histogram as is and figure that the sample of 100,000 values
represents our data well.</p>

<p>Looking at our histogram, <code class="highlighter-rouge">R</code> has binned out the data as follows:</p>

<ul>
  <li>300-350m, 350-400m, 400-450m</li>
</ul>

<p>We can determine that most of the pixel values fall in the 350-400m range with a
few pixels falling in the lower and higher range. We could specify different
breaks, if we wished to have a different distribution of pixels in each bin.</p>

<p>We can use those bins to plot our raster data. We will use the
<code class="highlighter-rouge">terrain.colors()</code> function to create a palette of 3 colors to use in our plot.</p>

<p>The <code class="highlighter-rouge">breaks</code> argument allows us to add breaks. To specify where the breaks
occur, we use the following syntax: <code class="highlighter-rouge">breaks=c(value1, value2, value3)</code>.
We can include as few or many breaks as we’d like.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># plot using breaks.</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">DSM_HARV</span><span class="p">,</span><span class="w">
     </span><span class="n">breaks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">300</span><span class="p">,</span><span class="w"> </span><span class="m">350</span><span class="p">,</span><span class="w"> </span><span class="m">400</span><span class="p">,</span><span class="w"> </span><span class="m">450</span><span class="p">),</span><span class="w">
     </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">terrain.colors</span><span class="p">(</span><span class="m">3</span><span class="p">),</span><span class="w">
     </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Digital Surface Model (DSM)\n NEON Harvard Forest Field Site"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="../fig/rmd-plot-with-breaks-1.png" title="plot of chunk plot-with-breaks" alt="plot of chunk plot-with-breaks" style="display: block; margin: auto;" /></p>

<blockquote class="callout">
  <h2 id="data-tip">Data Tip</h2>
  <p>Note that when we assign break values a set of 4 values will result in 3 bins of data.</p>
</blockquote>

<h3 id="format-plot">Format Plot</h3>
<p>If we need to create multiple plots using the same color palette, we can create
an <code class="highlighter-rouge">R</code> object (<code class="highlighter-rouge">myCol</code>) for the set of colors that we want to use. We can then
quickly change the palette across all plots by simply modifying the <code class="highlighter-rouge">myCol</code>
object.</p>

<p>We can label the x- and y-axes of our plot too using <code class="highlighter-rouge">xlab</code> and <code class="highlighter-rouge">ylab</code>.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Assign color to a object for repeat use/ ease of changing</span><span class="w">
</span><span class="n">myCol</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">terrain.colors</span><span class="p">(</span><span class="m">3</span><span class="p">)</span><span class="w">

</span><span class="c1"># Add axis labels</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">DSM_HARV</span><span class="p">,</span><span class="w">
     </span><span class="n">breaks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">300</span><span class="p">,</span><span class="w"> </span><span class="m">350</span><span class="p">,</span><span class="w"> </span><span class="m">400</span><span class="p">,</span><span class="w"> </span><span class="m">450</span><span class="p">),</span><span class="w">
     </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myCol</span><span class="p">,</span><span class="w">
     </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Digital Surface Model\nNEON Harvard Forest Field Site"</span><span class="p">,</span><span class="w">
     </span><span class="n">xlab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"UTM Westing Coordinate (m)"</span><span class="p">,</span><span class="w">
     </span><span class="n">ylab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"UTM Northing Coordinate (m)"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="../fig/rmd-add-plot-title-1.png" title="plot of chunk add-plot-title" alt="plot of chunk add-plot-title" style="display: block; margin: auto;" /></p>

<p>Or we can also turn off the axes altogether.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># or we can turn off the axis altogether</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">DSM_HARV</span><span class="p">,</span><span class="w">
     </span><span class="n">breaks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">300</span><span class="p">,</span><span class="w"> </span><span class="m">350</span><span class="p">,</span><span class="w"> </span><span class="m">400</span><span class="p">,</span><span class="w"> </span><span class="m">450</span><span class="p">),</span><span class="w">
     </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myCol</span><span class="p">,</span><span class="w">
     </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Digital Surface Model\n NEON Harvard Forest Field Site"</span><span class="p">,</span><span class="w">
     </span><span class="n">axes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="../fig/rmd-turn-off-axes-1.png" title="plot of chunk turn-off-axes" alt="plot of chunk turn-off-axes" style="display: block; margin: auto;" /></p>

<blockquote class="challenge">
  <h2 id="challenge-plot-using-custom-breaks">Challenge: Plot Using Custom Breaks</h2>

  <p>Create a plot of the Harvard Forest Digital Surface Model (DSM) that has:</p>

  <ol>
    <li>Six classified ranges of values (break points) that are evenly divided among the range of pixel values.</li>
    <li>Axis labels</li>
    <li>A plot title</li>
  </ol>

  <blockquote class="solution">
    <h2 id="answers">Answers</h2>

    <div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>An object of class ".SingleLayerData"
Slot "values":
logical(0)

Slot "offset":
[1] 0

Slot "gain":
[1] 1

Slot "inmemory":
[1] FALSE

Slot "fromdisk":
[1] TRUE

Slot "isfactor":
[1] FALSE

Slot "attributes":
list()

Slot "haveminmax":
[1] TRUE

Slot "min":
[1] 305.07

Slot "max":
[1] 416.07

Slot "band":
[1] 1

Slot "unit":
[1] ""

Slot "names":
[1] "HARV_dsmCrop"
</code></pre></div>    </div>

    <div class="output highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] 18.5
</code></pre></div>    </div>

    <p><img src="../fig/rmd-challenge-code-plotting-1.png" title="plot of chunk challenge-code-plotting" alt="plot of chunk challenge-code-plotting" style="display: block; margin: auto;" /></p>
  </blockquote>
</blockquote>

<h2 id="layering-rasters">Layering Rasters</h2>
<p>We can layer a raster on top of a hillshade raster for the same area, and use a
transparency factor to created a 3-dimensional shaded effect. A
hillshade is a raster that maps the shadows and texture that you would see from
above when viewing terrain.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># import DSM hillshade</span><span class="w">
</span><span class="n">DSM_hill_HARV</span><span class="w"> </span><span class="o">&lt;-</span><span class="w">
  </span><span class="n">raster</span><span class="p">(</span><span class="s2">"data/NEON-DS-Airborne-Remote-Sensing/HARV/DSM/HARV_DSMhill.tif"</span><span class="p">)</span><span class="w">

</span><span class="c1"># plot hillshade using a grayscale color ramp that looks like shadows.</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">DSM_hill_HARV</span><span class="p">,</span><span class="w">
    </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">grey</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">100</span><span class="o">/</span><span class="m">100</span><span class="p">),</span><span class="w">  </span><span class="c1"># create a color ramp of grey colors</span><span class="w">
    </span><span class="n">legend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w">
    </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Hillshade - DSM\n NEON Harvard Forest Field Site"</span><span class="p">,</span><span class="w">
    </span><span class="n">axes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="../fig/rmd-hillshade-1.png" title="plot of chunk hillshade" alt="plot of chunk hillshade" style="display: block; margin: auto;" /></p>

<blockquote class="callout">
  <h2 id="data-tip-1">Data Tip</h2>
  <p>Turn off, or hide, the legend on a plot using <code class="highlighter-rouge">legend=FALSE</code>.</p>
</blockquote>

<p>We can layer another raster on top of our hillshade using by using <code class="highlighter-rouge">add = TRUE</code>.
Let’s overlay <code class="highlighter-rouge">DSM_HARV</code> on top of the <code class="highlighter-rouge">hill_HARV</code>.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># plot hillshade using a grayscale color ramp that looks like shadows.</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">DSM_hill_HARV</span><span class="p">,</span><span class="w">
    </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">grey</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">100</span><span class="o">/</span><span class="m">100</span><span class="p">),</span><span class="w">  </span><span class="c1">#create a color ramp of grey colors</span><span class="w">
    </span><span class="n">legend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w">
    </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"DSM with Hillshade \n NEON Harvard Forest Field Site"</span><span class="p">,</span><span class="w">
    </span><span class="n">axes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">

</span><span class="c1"># add the DSM on top of the hillshade</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">DSM_HARV</span><span class="p">,</span><span class="w">
     </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rainbow</span><span class="p">(</span><span class="m">100</span><span class="p">),</span><span class="w">
     </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.4</span><span class="p">,</span><span class="w">
     </span><span class="n">add</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">T</span><span class="p">,</span><span class="w">
     </span><span class="n">legend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">F</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="../fig/rmd-overlay-hillshade-1.png" title="plot of chunk overlay-hillshade" alt="plot of chunk overlay-hillshade" style="display: block; margin: auto;" /></p>

<p>The alpha value determines how transparent the colors will be (0 being
transparent, 1 being opaque). Note that here we used the color palette
<code class="highlighter-rouge">rainbow()</code> instead of <code class="highlighter-rouge">terrain.color()</code>.</p>

<ul>
  <li>More information in the
<a href="https://stat.ethz.ch/R-manual/R-devel/library/grDevices/html/palettes.html" target="_blank"><code class="highlighter-rouge">R</code> color palettes documentation</a>.</li>
</ul>

<blockquote class="challenge">
  <h2 id="challenge-create-dtm--dsm-for-sjer">Challenge: Create DTM &amp; DSM for SJER</h2>

  <p>Use the files in the <code class="highlighter-rouge">NEON_RemoteSensing/SJER/</code> directory to create a Digital
Terrain Model map and Digital Surface Model map of the San Joaquin Experimental
Range field site.</p>

  <p>Make sure to:</p>

  <ul>
    <li>include hillshade in the maps,</li>
    <li>label axes on the DSM map and exclude them from the DTM map,</li>
    <li>a title for the maps,</li>
    <li>experiment with various alpha values and color palettes to represent the
 data.</li>
  </ul>

  <blockquote class="solution">
    <h2 id="answers-1">Answers</h2>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># CREATE DSM MAPS</span><span class="w">
</span><span class="c1"># import DSM</span><span class="w">
</span><span class="n">DSM_SJER</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">raster</span><span class="p">(</span><span class="s2">"data/NEON-DS-Airborne-Remote-Sensing/SJER/DSM/SJER_dsmCrop.tif"</span><span class="p">)</span><span class="w">
</span><span class="c1"># import DSM hillshade</span><span class="w">
</span><span class="n">DSM_hill_SJER</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">raster</span><span class="p">(</span><span class="s2">"data/NEON-DS-Airborne-Remote-Sensing/SJER/DSM/SJER_dsmHill.tif"</span><span class="p">)</span><span class="w">

</span><span class="c1"># plot hillshade using a grayscale color ramp that looks like shadows.</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">DSM_hill_SJER</span><span class="p">,</span><span class="w">
    </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">grey</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">100</span><span class="o">/</span><span class="m">100</span><span class="p">),</span><span class="w">  </span><span class="c1">#create a color ramp of grey colors</span><span class="w">
    </span><span class="n">legend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w">
    </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"DSM with Hillshade\n NEON SJER Field Site"</span><span class="p">,</span><span class="w">
    </span><span class="n">axes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">

</span><span class="c1"># add the DSM on top of the hillshade</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">DSM_SJER</span><span class="p">,</span><span class="w">
     </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">terrain.colors</span><span class="p">(</span><span class="m">100</span><span class="p">),</span><span class="w">
     </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.7</span><span class="p">,</span><span class="w">
     </span><span class="n">add</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w">
     </span><span class="n">legend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">
</span></code></pre></div>    </div>

    <p><img src="../fig/rmd-challenge-hillshade-layering-1.png" title="plot of chunk challenge-hillshade-layering" alt="plot of chunk challenge-hillshade-layering" style="display: block; margin: auto;" /></p>

    <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># CREATE SJER DTM MAP</span><span class="w">
</span><span class="c1"># import DTM</span><span class="w">
</span><span class="n">DTM_SJER</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">raster</span><span class="p">(</span><span class="s2">"data/NEON-DS-Airborne-Remote-Sensing/SJER/DTM/SJER_dtmCrop.tif"</span><span class="p">)</span><span class="w">
</span><span class="c1"># import DTM hillshade</span><span class="w">
</span><span class="n">DTM_hill_SJER</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">raster</span><span class="p">(</span><span class="s2">"data/NEON-DS-Airborne-Remote-Sensing/SJER/DTM/SJER_dtmHill.tif"</span><span class="p">)</span><span class="w">

</span><span class="c1"># plot hillshade using a grayscale color ramp that looks like shadows.</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">DTM_hill_SJER</span><span class="p">,</span><span class="w">
    </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">grey</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">100</span><span class="o">/</span><span class="m">100</span><span class="p">),</span><span class="w">  </span><span class="c1">#create a color ramp of grey colors</span><span class="w">
    </span><span class="n">legend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w">
    </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"DTM with Hillshade\n NEON SJER Field Site"</span><span class="p">,</span><span class="w">
    </span><span class="n">axes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">

</span><span class="c1"># add the DSM on top of the hillshade</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">DTM_SJER</span><span class="p">,</span><span class="w">
     </span><span class="n">col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">terrain.colors</span><span class="p">(</span><span class="m">100</span><span class="p">),</span><span class="w">
     </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.4</span><span class="p">,</span><span class="w">
     </span><span class="n">add</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w">
     </span><span class="n">legend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span><span class="w">
</span></code></pre></div>    </div>

    <p><img src="../fig/rmd-challenge-hillshade-layering-2.png" title="plot of chunk challenge-hillshade-layering" alt="plot of chunk challenge-hillshade-layering" style="display: block; margin: auto;" /></p>
  </blockquote>
</blockquote>


<blockquote class="keypoints">
  <h2>Key Points</h2>
  <ul>
    
    <li>
</li>
    
  </ul>
</blockquote>

</article>

<div class="row">
  <div class="col-md-1">
    <h3>
      
      <a href="../01-raster-structure/"><span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span><span class="sr-only">previous episode</span></a>
      
    </h3>
  </div>
  <div class="col-md-10">
    
  </div>
  <div class="col-md-1">
    <h3>
      
      <a href="../03-raster-reproject-in-r/"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span><span class="sr-only">next episode</span></a>
      
    </h3>
  </div>
</div>


      
      
<footer>
  <div class="row">
    <div class="col-md-6" align="left">
      <h4>
	Copyright &copy; 2016–2018
	
	<a href="http://datacarpentry.org">Data Carpentry</a>
	
      </h4>
    </div>
    <div class="col-md-6" align="right">
      <h4>
	
	<a href="/edit/gh-pages/_episodes/02-raster-plot.md">Edit on GitHub</a>
	
	/
	<a href="/blob/gh-pages/CONTRIBUTING.md">Contributing</a>
	/
	<a href="/">Source</a>
	/
	<a href="/blob/gh-pages/CITATION">Cite</a>
	/
	<a href="mailto:lessons@software-carpentry.org">Contact</a>
      </h4>
    </div>
  </div>
</footer>

      
    </div>
    
<script src="../assets/js/jquery.min.js"></script>
<script src="../assets/js/bootstrap.min.js"></script>
<script src="../assets/js/lesson.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-37305346-2', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>
